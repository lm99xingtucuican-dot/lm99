<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ğŸ©µğŸ©· å¹¸ç¦æ—¶åˆ» ğŸ©·ğŸ©µ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family: "Smiley Sans";
  src: url("https://cdn.jsdelivr.net/gh/atelier-anchor/smiley-sans@latest/SmileySans-Regular.otf") format("opentype");
}

*{box-sizing:border-box;margin:0;padding:0;}
html, body{height:100%; font-family:"Smiley Sans",-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;}

/* èƒŒæ™¯æ¸å˜ & ç²’å­ */
body{
  background:linear-gradient(135deg,#4ab7cc 0%,#79cbd8 25%,#b7dbe3 50%,#e4cddc 75%,#f2b3c6 100%);
  background-attachment:fixed;
  overflow:hidden;
  position:relative;
}
#particles{
  position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;
}
.particle{
  position:absolute; border-radius:50%; opacity:0.4; animation:float linear infinite;
}
@keyframes float{from{transform:translateY(100vh) scale(1);} to{transform:translateY(-10vh) scale(1.2);}}

.wrapper{
  display:flex; height:100vh; position:relative; z-index:1; align-items:flex-start;
}

/* å·¦ä¾§æ—¥æœŸç´¢å¼• */
.sidebar{
  width:260px; position:fixed; left:0; top:0; bottom:0; overflow-y:auto; padding:20px;
}
.sidebar h2{margin-bottom:20px; font-size:18px; color:#fff;}
.year, .month, .day{
  background:rgba(255,255,255,0.9); border-radius:12px; margin:8px 0; padding:8px 12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); cursor:pointer;
}
.month{margin-left:15px;}
.day{margin-left:30px; font-size:14px;}

/* å³ä¾§ç•™è¨€æ¿ */
.main{
  margin-left:260px; flex:1; overflow-y:auto; padding:40px; display:flex; flex-direction:column;
}
.back{display:inline-block; margin-bottom:20px; text-decoration:none; color:#fff; font-weight:bold;}
.back:hover{opacity:.8;}

.section{
  background:rgba(255,255,255,0.85); padding:20px; border-radius:18px; margin-bottom:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08); flex-shrink:0;
}
.section h3{margin-bottom:10px;}
.section p{font-size:14px; line-height:1.8; color:#555;}
.section small{display:block; margin-top:6px; color:#4ab7cc; font-weight:600;}

/* æ‰‹æœºé€‚é… */
@media(max-width:768px){
  .sidebar{position:relative;width:100%;height:auto;}
  .main{margin-left:0;}
  .wrapper{flex-direction:column;}
}

footer{text-align:center; font-size:12px; color:#eee; margin:30px 0;}
</style>
</head>

<body>

<div id="particles"></div>

<div class="wrapper">
  <div class="sidebar">
    <h2>ğŸ©µ æ—¥æœŸç´¢å¼• ğŸ©·</h2>
    <div id="tree"></div>
  </div>

  <div class="main">
    <a href=" " class="back">â† è¿”å›é¦–é¡µ</a >
    <div id="posts"></div>

    <!-- Cusdis ç•™è¨€æ¿ -->
    <div id="cusdis_thread"
      data-host="https://cusdis.com"
      data-app-id="6bd954b7-e2b4-4206-a1c3-3072cecfc326"
      data-page-id="global-board"
      data-page-title="æ˜Ÿé€”ç’€ç’¨">
    </div>
  </div>
</div>

<footer>Â© 2026 LUMU</footer>

<script src="https://cusdis.com/js/cusdis.es.js"></script>

<script>
/* ğŸŒ¸ ç²’å­ç”Ÿæˆ */
const particleContainer = document.getElementById("particles");
for(let i=0;i<25;i++){
  const p = document.createElement("div");
  p.className="particle";
  const size = Math.random()*8+4;
  p.style.width=size+"px";
  p.style.height=size+"px";
  p.style.left=Math.random()*100+"%";
  p.style.background = Math.random()>0.5 ? "#ffffff" : "#ffd1ec";
  p.style.animationDuration = (Math.random()*15+10)+"s";
  p.style.animationDelay = Math.random()*10+"s";
  particleContainer.appendChild(p);
}

/* ğŸŒ¸ è·å–ç•™è¨€å¹¶ç”Ÿæˆæ—¥æœŸæ ‘ */
const APP_ID = "6bd954b7-e2b4-4206-a1c3-3072cecfc326";

fetch(`https://cusdis.com/api/open/comments?appId=${APP_ID}&page=1`)
.then(res=>res.json())
.then(data=>{
  const comments = data.data;
  const tree = {};
  const postsDiv = document.getElementById("posts");
  const treeDiv = document.getElementById("tree");

  comments.forEach(c=>{
    const date = new Date(c.createdAt);
    const y = date.getFullYear();
    const m = String(date.getMonth()+1).padStart(2,"0");
    const d = String(date.getDate()).padStart(2,"0");

    if(!tree[y]) tree[y]={};
    if(!tree[y][m]) tree[y][m]={};
    if(!tree[y][m][d]) tree[y][m][d]=[];
    tree[y][m][d].push(c);
  });

  const sortedYears = Object.keys(tree).sort((a,b)=>b-a);

  sortedYears.forEach(y=>{
    const yearDiv=document.createElement("div");
    yearDiv.className="year"; yearDiv.textContent=y;
    const monthWrap=document.createElement("div");
    yearDiv.onclick=()=>{ monthWrap.style.display = monthWrap.style.display==="block"?"none":"block"; };

    Object.keys(tree[y]).sort((a,b)=>b-a).forEach(m=>{
      const monthDiv=document.createElement("div");
      monthDiv.className="month"; monthDiv.textContent=m;
      const dayWrap=document.createElement("div");
      monthDiv.onclick=(e)=>{ e.stopPropagation(); dayWrap.style.display=dayWrap.style.display==="block"?"none":"block"; };

      Object.keys(tree[y][m]).sort((a,b)=>b-a).forEach(d=>{
        const dayDiv=document.createElement("div");
        dayDiv.className="day"; dayDiv.textContent=d;
        dayDiv.onclick=(e)=>{ e.stopPropagation(); showPosts(y,m,d); };
        dayWrap.appendChild(dayDiv);
      });

      monthWrap.appendChild(monthDiv);
      monthWrap.appendChild(dayWrap);
    });

    treeDiv.appendChild(yearDiv);
    treeDiv.appendChild(monthWrap);
  });

  function showPosts(y,m,d){
    postsDiv.innerHTML="";
    tree[y][m][d].forEach(c=>{
      postsDiv.innerHTML+=`
        <div class="section">
          <h3>${y}-${m}-${d}</h3>
          <p>${c.content}</p >
          <small>${c.nickname}</small>
        </div>
      `;
    });
  }

  // é»˜è®¤æ˜¾ç¤ºæœ€æ–°ä¸€å¤©
  const y0 = sortedYears[0];
  const m0 = Object.keys(tree[y0]).sort((a,b)=>b-a)[0];
  const d0 = Object.keys(tree[y0][m0]).sort((a,b)=>b-a)[0];
  showPosts(y0,m0,d0);
});
</script>

</body>
</html>
