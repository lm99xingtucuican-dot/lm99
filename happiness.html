<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ğŸ©µğŸ©· 3å¹¸ç¦æ—¶åˆ» ğŸ©·ğŸ©µ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family:"Smiley Sans";
  src:url("https://cdn.jsdelivr.net/gh/atelier-anchor/smiley-sans@latest/SmileySans-Regular.otf") format("opentype");
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;}

/* èƒŒæ™¯ */
body{
  font-family:"Smiley Sans",-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  background:linear-gradient(135deg,#4ab7cc 0%,#79cbd8 25%,#b7dbe3 50%,#e4cddc 75%,#f2b3c6 100%);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

/* ç²’å­ */
#particles{
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  pointer-events:none; z-index:0;
}

.particle{
  position:absolute;
  border-radius:50%;
  opacity:0.4;
  animation:float linear infinite;
}

@keyframes float{
  from{transform:translateY(100vh) scale(1);}
  to{transform:translateY(-10vh) scale(1.2);}
}

/* ä¸»ä½“å¸ƒå±€ */
.wrapper{
  display:flex;
  flex:1;
  position:relative;
  z-index:1;
  min-height:100vh;
}

/* å·¦ä¾§æ—¥æœŸç´¢å¼• */
.sidebar{
  width:260px;
  background:transparent;
  padding:20px;
  overflow-y:auto;
}

.sidebar h2{color:#fff;margin-bottom:20px;font-size:18px;}
.year, .month, .day{
  background:rgba(255,255,255,0.9);
  border-radius:12px;
  margin:8px 0;
  padding:8px 12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  cursor:pointer;
}
.month{margin-left:15px;}
.day{margin-left:30px;font-size:14px;}

/* å³ä¾§ç•™è¨€æ¿ */
.main{
  flex:1;
  padding:30px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
}

.section{
  background:rgba(255,255,255,0.9);
  padding:20px 25px;
  border-radius:18px;
  margin-bottom:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
  flex-shrink:0;
}
.section h3{margin-bottom:10px;}
.section p{font-size:14px;line-height:1.8;color:#555;}
.section small{display:block;margin-top:6px;color:#4ab7cc;font-weight:600;}

.back{margin-bottom:20px;color:#fff;font-weight:bold;text-decoration:none;}
.back:hover{opacity:.8;}

/* æ‰‹æœºé€‚é… */
@media(max-width:768px){
  .wrapper{flex-direction:column;}
  .sidebar{width:100%;height:auto;}
  .main{margin-left:0;}
}
</style>
</head>

<body>
<div id="particles"></div>

<div class="wrapper">
  <div class="sidebar">
    <h2>ğŸ©µ æ—¥æœŸç´¢å¼• ğŸ©·</h2>
    <div id="tree"></div>
  </div>

  <div class="main">
    <a href=" " class="back">â† è¿”å›é¦–é¡µ</a >
    <div id="posts"></div>
  </div>
</div>

<script>
/* ğŸŒ¸ ç²’å­ç”Ÿæˆ */
const particleContainer = document.getElementById("particles");
for(let i=0;i<50;i++){
  const p=document.createElement("div");
  p.className="particle";
  const size=Math.random()*6+3;
  p.style.width=size+"px";
  p.style.height=size+"px";
  p.style.left=Math.random()*100+"%";
  p.style.background=Math.random()>0.5?"#ffffff":"#ffd1ec";
  p.style.animationDuration=(Math.random()*15+10)+"s";
  p.style.animationDelay=Math.random()*10+"s";
  particleContainer.appendChild(p);
}

/* ğŸŒ¸ åŠ è½½ diary.json å¹¶ç”Ÿæˆæ ‘çŠ¶ç´¢å¼• */
fetch('diary.json')
.then(res=>res.json())
.then(data=>{
  const treeDiv=document.getElementById("tree");
  const postsDiv=document.getElementById("posts");
  
  // æŒ‰æ—¥æœŸæ’åºå€’åº
  data.sort((a,b)=> new Date(b.date)-new Date(a.date));

  // æ„å»ºæ ‘çŠ¶å¯¹è±¡
  const tree={};
  data.forEach(item=>{
    const [y,m,d]=item.date.split('-');
    if(!tree[y]) tree[y]={};
    if(!tree[y][m]) tree[y][m]={};
    if(!tree[y][m][d]) tree[y][m][d]=[];
    tree[y][m][d].push(item);
  });

  // æ¸²æŸ“æ ‘çŠ¶ç´¢å¼•
  Object.keys(tree).sort().reverse().forEach(y=>{
    const yearDiv=document.createElement("div");
    yearDiv.className="year"; yearDiv.textContent=y;
    const monthWrap=document.createElement("div");

    yearDiv.onclick=()=>{ monthWrap.style.display = monthWrap.style.display==="block"?"none":"block"; };

    Object.keys(tree[y]).sort().reverse().forEach(m=>{
      const monthDiv=document.createElement("div");
      monthDiv.className="month"; monthDiv.textContent=m;
      const dayWrap=document.createElement("div");

      monthDiv.onclick=(e)=>{ e.stopPropagation(); dayWrap.style.display=dayWrap.style.display==="block"?"none":"block"; };

      Object.keys(tree[y][m]).sort().reverse().forEach(d=>{
        const dayDiv=document.createElement("div");
        dayDiv.className="day"; dayDiv.textContent=d;
        dayDiv.onclick=(e)=>{
          e.stopPropagation();
          showPosts(y,m,d);
        };
        dayWrap.appendChild(dayDiv);
      });

      monthWrap.appendChild(monthDiv);
      monthWrap.appendChild(dayWrap);
    });

    treeDiv.appendChild(yearDiv);
    treeDiv.appendChild(monthWrap);
  });

  function showPosts(y,m,d){
    postsDiv.innerHTML="";
    tree[y][m][d].forEach(item=>{
      postsDiv.innerHTML+=`
        <div class="section">
          <h3>${item.date}</h3>
          <p>${item.content || "ä»Šå¤©è¿˜æ²¡æœ‰ç•™è¨€ğŸŒ¸"}</p >
          <small>${item.nickname || ""}</small>
        </div>
      `;
    });
  }

  // é»˜è®¤æ˜¾ç¤ºæœ€è¿‘ä¸€å¤©
  const latestY=Object.keys(tree).sort().reverse()[0];
  const latestM=Object.keys(tree[latestY]).sort().reverse()[0];
  const latestD=Object.keys(tree[latestY][latestM]).sort().reverse()[0];
  showPosts(latestY,latestM,latestD);

});
</script>

<footer style="text-align:center;font-size:12px;color:#eee;margin:30px 0;">
Â© 2026 LUMU
</footer>
</body>
</html>
